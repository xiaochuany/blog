---
date:
    created: 2025-04-13
authors:
    - xy
categories: 
    - Tutorial
tags:
    - dev-tools
slug: mortgate
---

# Build a mortgate calculator with fasthtml

There are app frameworks out there for domain experts to easily get started with app buiding. Think: `streamlit` for data scientist. 

A possible downside of these approaches is the lack of flexibility and scalability. `fasthtml` is a new python framework that I like very much because it directly handles html (htmx for interactivity) and http without unnecessary abstractions, yet pretty neat and fast for new users to get started. 

Here is a toy example. The whole app is one python file with 20 lines of code. Features highlighted: 

- html tags are python object.
- router and function names map to  url and http methods.
- htmx for (server centric) interactivity, avoiding writing (too many) javascript code. 
- by default picocss is used for styling (it can be swapped by tailwind, or customized css)

```py
from fasthtml.common import *

app, rt = fast_app()

@rt("/")
def get():
    return Titled("mortgate calculator", 
        Form(
            Grid(
                Input(type="number", placeholder="Loan Amount", name="p"),
                Input(type="number", placeholder="Interest rate (per cent)", name="r"),
                Input(type="number", placeholder="Loan Term (months)", name="n"),
                Button("Calculate", target_id="result", hx_put="/calculate"))),
        Div(id="result")
    )

@rt("/calculate")
def put(p:float, r:float, n:int):
    r= r/ 100 / 12 # monthly rate
    m = p*r*(1+r)**n / ((1+r)**n - 1) # https://en.wikipedia.org/wiki/Mortgage_calculator
    return Div(f"monthly payment {m:.2f} of which interest payment {p*r:.2f}, principle payment {m-p*r:.2f}")

serve()
```

Here is the output 

![alt text](assets/image.png)
